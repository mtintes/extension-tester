name: 'publish to slack'
description: 'ya publish to slack'



runs:
  using: "composite"
  steps:
    - shell: bash
      id: set_payload
      run: |
        jsonMessage=`cat ./.github/actions/slack-publish/slack_test2.json`
        echo "::set-output name=payload::$jsonMessage"
    - shell: bash
      env:
        SLACK_TOKEN: ${{secrets.SLACK_TOKEN}}
      run: |
        curl -X POST "https://slack.com/api/chat.postMessage" -H "Authorization: Bearer $SLACK_TOKEN" -H "Content-Type: application/json" -d '${{steps.set_payload.outputs.payload }}'
